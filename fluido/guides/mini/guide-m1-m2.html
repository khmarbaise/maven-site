<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2015-04-13 
 | Rendered using Apache Maven Fluido Skin 1.4-SNAPSHOT
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Jay H. Hartley" />
    <meta name="Date-Creation-yyyymmdd" content="20080101" />
    <meta name="Date-Revision-yyyymmdd" content="20150413" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Maven &#x2013; Guide to Moving From Maven 1.x to Maven 2.x</title>
    <link rel="stylesheet" href="../../css/apache-maven-fluido-1.4-SNAPSHOT.min.css" />
    <link rel="stylesheet" href="../../css/site.css" />
    <link rel="stylesheet" href="../../css/print.css" media="print" />

      
    <script type="text/javascript" src="../../js/apache-maven-fluido-1.4-SNAPSHOT.min.js"></script>

                          
        
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>
                      
        
<script type="text/javascript">_uacct = "UA-140879-1";
        urchinTracker();</script>
          
                  </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="http://www.apache.org/" id="bannerLeft">
                                                                                                <img src="../../images/apache-maven-project.png" />
                </a>
                      </div>
        <div class="pull-right">                                <a href="../.././" id="bannerRight">
                                                                                                <img src="../../images/maven-logo-black-on-white.png" />
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                              <li class="">
                    <a href="http://www.apache.org/" class="externalLink" title="Apache">
        Apache</a>
                    <span class="divider">/</span>
      </li>
            <li class="">
                    <a href="../../index.html" title="Maven">
        Maven</a>
                    <span class="divider">/</span>
      </li>
        <li class="active ">Guide to Moving From Maven 1.x to Maven 2.x</li>
        
                
                    
                  <li id="publishDate" class="pull-right">Last Published: 2015-04-13</li>
            
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Main</li>
                              
      <li>
  
                          <a href="../../index.html" title="Welcome">
          <span class="none"></span>
        Welcome</a>
            </li>
                              <li class="nav-header">Get Maven</li>
                              
      <li>
  
                          <a href="../../download.html" title="Download">
          <span class="none"></span>
        Download</a>
            </li>
                
      <li>
  
                          <a href="../../docs/history.html" title="Releases History">
          <span class="none"></span>
        Releases History</a>
            </li>
                
      <li>
  
                          <a href="../../docs/3.3.1/release-notes.html" title="Release Notes (3.3.1)">
          <span class="none"></span>
        Release Notes (3.3.1)</a>
            </li>
                
      <li>
  
                          <a href="../../docs/3.2.5/release-notes.html" title="Release Notes (3.2.5)">
          <span class="none"></span>
        Release Notes (3.2.5)</a>
            </li>
                
      <li>
  
                          <a href="../../docs/3.1.1/release-notes.html" title="Release Notes (3.1.1)">
          <span class="none"></span>
        Release Notes (3.1.1)</a>
            </li>
                
      <li>
  
                          <a href="../../docs/3.0.5/release-notes.html" title="Release Notes (3.0.5)">
          <span class="none"></span>
        Release Notes (3.0.5)</a>
            </li>
                
      <li>
  
                          <a href="../../release-notes-all.html" title="All Release Notes">
          <span class="none"></span>
        All Release Notes</a>
            </li>
                
      <li>
  
                          <a href="http://www.apache.org/licenses/" class="externalLink" title="License">
          <span class="none"></span>
        License</a>
            </li>
                
      <li>
  
                          <a href="../../security.html" title="Security">
          <span class="none"></span>
        Security</a>
            </li>
                              <li class="nav-header">IDE Integration</li>
                              
      <li>
  
                          <a href="../../eclipse-plugin.html" title="Eclipse">
          <span class="none"></span>
        Eclipse</a>
            </li>
                
      <li>
  
                          <a href="../../netbeans-module.html" title="NetBeans">
          <span class="none"></span>
        NetBeans</a>
            </li>
                              <li class="nav-header">About Maven</li>
                              
      <li>
  
                          <a href="../../what-is-maven.html" title="What is Maven?">
          <span class="none"></span>
        What is Maven?</a>
            </li>
                
      <li>
  
                          <a href="../../maven-features.html" title="Features">
          <span class="none"></span>
        Features</a>
            </li>
                
      <li>
  
                          <a href="../../general.html" title="FAQ (official)">
          <span class="none"></span>
        FAQ (official)</a>
            </li>
                
      <li>
  
                          <a href="http://docs.codehaus.org/display/MAVENUSER/FAQs-1" class="externalLink" title="FAQ (unofficial)">
          <span class="none"></span>
        FAQ (unofficial)</a>
            </li>
                
      <li>
  
                          <a href="../../support-and-training.html" title="Support and Training">
          <span class="none"></span>
        Support and Training</a>
            </li>
                              <li class="nav-header">Documentation</li>
                              
      <li>
  
                          <a href="../../plugins/index.html" title="Maven Plugins">
          <span class="none"></span>
        Maven Plugins</a>
            </li>
                
      <li>
  
                          <a href="../../guides/index.html" title="Index (category)">
          <span class="none"></span>
        Index (category)</a>
            </li>
                
      <li>
  
                          <a href="../../run-maven/index.html" title="Running Maven">
          <span class="none"></span>
        Running Maven</a>
            </li>
                                                                                                                                          
      <li>
  
                          <a href="../../users/index.html" title="User Centre">
          <span class="icon-chevron-right"></span>
        User Centre</a>
                  </li>
                                                                                                      
      <li>
  
                          <a href="../../plugin-developers/index.html" title="Plugin Developer Centre">
          <span class="icon-chevron-right"></span>
        Plugin Developer Centre</a>
                  </li>
                
      <li>
  
                          <a href="../../repository/index.html" title="Maven Repository Centre">
          <span class="none"></span>
        Maven Repository Centre</a>
            </li>
                
      <li>
  
                          <a href="../../developers/index.html" title="Maven Developer Centre">
          <span class="none"></span>
        Maven Developer Centre</a>
            </li>
                
      <li>
  
                          <a href="../../articles.html" title="Books and Resources">
          <span class="none"></span>
        Books and Resources</a>
            </li>
                
      <li>
  
                          <a href="http://docs.codehaus.org/display/MAVENUSER/Home" class="externalLink" title="Wiki">
          <span class="none"></span>
        Wiki</a>
            </li>
                              <li class="nav-header">Community</li>
                              
      <li>
  
                          <a href="../../community.html" title="Community Overview">
          <span class="none"></span>
        Community Overview</a>
            </li>
                
      <li>
  
                          <a href="../../guides/development/guide-helping.html" title="How to Contribute">
          <span class="none"></span>
        How to Contribute</a>
            </li>
                
      <li>
  
                          <a href="../../guides/mini/guide-maven-evangelism.html" title="Maven Repository">
          <span class="none"></span>
        Maven Repository</a>
            </li>
                
      <li>
  
                          <a href="../../users/getting-help.html" title="Getting Help">
          <span class="none"></span>
        Getting Help</a>
            </li>
                
      <li>
  
                          <a href="../../issue-tracking.html" title="Issue Tracking">
          <span class="none"></span>
        Issue Tracking</a>
            </li>
                
      <li>
  
                          <a href="../../source-repository.html" title="Source Repository">
          <span class="none"></span>
        Source Repository</a>
            </li>
                
      <li>
  
                          <a href="../../team-list.html" title="The Maven Team">
          <span class="none"></span>
        The Maven Team</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                          
      <li>
  
                          <a href="../../project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                              <li class="nav-header">Maven Projects</li>
                              
      <li>
  
                          <a href="../../ant-tasks/index.html" title="Ant Tasks">
          <span class="none"></span>
        Ant Tasks</a>
            </li>
                
      <li>
  
                          <a href="../../archetype/index.html" title="Archetype">
          <span class="none"></span>
        Archetype</a>
            </li>
                
      <li>
  
                          <a href="../../doxia/index.html" title="Doxia">
          <span class="none"></span>
        Doxia</a>
            </li>
                
      <li>
  
                          <a href="../../jxr/index.html" title="JXR">
          <span class="none"></span>
        JXR</a>
            </li>
                
      <li>
  
                          <a href="../../ref/current" title="Maven">
          <span class="none"></span>
        Maven</a>
            </li>
                
      <li>
  
                          <a href="../../pom/index.html" title="Parent POMs">
          <span class="none"></span>
        Parent POMs</a>
            </li>
                
      <li>
  
                          <a href="../../plugins/index.html" title="Plugins">
          <span class="none"></span>
        Plugins</a>
            </li>
                
      <li>
  
                          <a href="../../plugin-testing/index.html" title="Plugin Testing">
          <span class="none"></span>
        Plugin Testing</a>
            </li>
                
      <li>
  
                          <a href="../../plugin-tools/index.html" title="Plugin Tools">
          <span class="none"></span>
        Plugin Tools</a>
            </li>
                
      <li>
  
                          <a href="../../apache-resource-bundles/index.html" title="Resource Bundles">
          <span class="none"></span>
        Resource Bundles</a>
            </li>
                
      <li>
  
                          <a href="../../scm/index.html" title="SCM">
          <span class="none"></span>
        SCM</a>
            </li>
                
      <li>
  
                          <a href="../../shared/index.html" title="Shared Components">
          <span class="none"></span>
        Shared Components</a>
            </li>
                
      <li>
  
                          <a href="../../skins/index.html" title="Skins">
          <span class="none"></span>
        Skins</a>
            </li>
                
      <li>
  
                          <a href="../../surefire/index.html" title="Surefire">
          <span class="none"></span>
        Surefire</a>
            </li>
                
      <li>
  
                          <a href="../../wagon/index.html" title="Wagon">
          <span class="none"></span>
        Wagon</a>
            </li>
                              <li class="nav-header">ASF</li>
                              
      <li>
  
                          <a href="http://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How Apache Works">
          <span class="none"></span>
        How Apache Works</a>
            </li>
                
      <li>
  
                          <a href="http://www.apache.org/foundation/" class="externalLink" title="Foundation">
          <span class="none"></span>
        Foundation</a>
            </li>
                
      <li>
  
                          <a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsoring Apache">
          <span class="none"></span>
        Sponsoring Apache</a>
            </li>
                
      <li>
  
                          <a href="http://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">
          <span class="none"></span>
        Thanks</a>
            </li>
            </ul>
                
                    
                            <form id="search-form" action="https://www.google.com/search" method="get" >
    
  <input value="$sitesearchValue" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="https://www.google.com/coop/cse/brand?form=search-form"></script>
          
          <hr />

           <div id="poweredBy">
                   
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>

    
    <div class="g-plusone" data-href="http://maven.apache.org/" data-size="tall" ></div>

                   <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <!-- Licensed to the Apache Software Foundation (ASF) under one --><!-- or more contributor license agreements.  See the NOTICE file --><!-- distributed with this work for additional information --><!-- regarding copyright ownership.  The ASF licenses this file --><!-- to you under the Apache License, Version 2.0 (the --><!-- "License"); you may not use this file except in compliance --><!-- with the License.  You may obtain a copy of the License at --><!--  --><!-- http://www.apache.org/licenses/LICENSE-2.0 --><!--  --><!-- Unless required by applicable law or agreed to in writing, --><!-- software distributed under the License is distributed on an --><!-- "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY --><!-- KIND, either express or implied.  See the License for the --><!-- specific language governing permissions and limitations --><!-- under the License. --><!-- NOTE: For help with the syntax of this file, see: --><!-- http://maven.apache.org/doxia/references/apt-format.html --><div class="section">
<h2><a name="Guide_to_Moving_from_Maven_1.x_to_Maven_2.x"></a>Guide to Moving from Maven 1.x to Maven 2.x</h2>
<p>This document is intended to be continuously updated from the mail list archives. For an only slightly out-of-date reference with concrete examples, check out Vincent Massol's <a class="externalLink" href="http://blogs.codehaus.org/people/vmassol/archives/001170_javazone_2005.html">JavaZone2005 presentation</a>.</p>
<div class="section">
<h3><a name="Parallel_Builds"></a>Parallel Builds</h3>
<p>It is possible to establish parallel Maven builds, one using the old M1 settings, and a second using M2. The Maven 2 configuration file names and uses have been modified, so the two builds should not conflict.</p>
<p>A Maven 1.x build is configured with the following files:</p>
<ul>
<li>[project.xml] Project Object Model (POM) definition</li>
<li>[maven.xml] Custom build scripts</li>
<li>[project.properties] general build settings</li>
<li>[build.properties] local build settings
<p>A Maven 2 build is configured with a different file set:</p></li>
<li>[pom.xml] POM definition</li>
<li>[settings.xml] local configuration</li></ul></div>
<div class="section">
<h3><a name="Migrating_the_POM"></a>Migrating the POM</h3>
<p>The Project Object Model (POM) has moved from the <tt>project.xml</tt> file to <tt>pom.xml</tt>. The XML schema has also changed, from <a class="externalLink" href="http://maven.apache.org/xsd/maven-v3_0_0.xsd">Version 3</a> to <a class="externalLink" href="http://maven.apache.org/xsd/maven-4.0.0.xsd">Version 4</a>.</p>
<p>The new POM is nominally a superset of the old, so the first step in creating a <tt>pom.xml</tt> is to copy over <tt>project.xml</tt>. Then start tweaking. There are several new elements that can be added to a POM, but all are optional so should not cause a problem with an initial build.</p>
<p>If you want some help converting your <tt>project.xml</tt> into a <tt>pom.xml</tt> you can use the <a class="externalLink" href="http://maven.apache.org/plugins/maven-one-plugin/">maven-one-plugin</a>. If you run the following command, it will convert your <tt>project.xml</tt> into a <tt>pom.xml</tt>:</p>
<div class="source"><pre class="prettyprint linenums">mvn one:convert</pre></div>
<p>project.xml:</p>
<div class="source"><pre class="prettyprint linenums">&lt;project&gt;
  &lt;pomVersion&gt;3&lt;/pomVersion&gt;
  &lt;id&gt;util&lt;/id&gt;
  &lt;name&gt;Generic utility code&lt;/name&gt;
  &lt;groupId&gt;project&lt;/groupId&gt;
  &lt;currentVersion&gt;1.1&lt;/currentVersion&gt;
  &lt;package&gt;org.apache.project.util&lt;/package&gt;
  &lt;dependencies&gt;
    ...
  &lt;/dependencies&gt;
  &lt;build&gt;
    ...
  &lt;/build&gt;
  ...
&lt;/project&gt;</pre></div>
<p>pom.xml:</p>
<div class="source"><pre class="prettyprint linenums">&lt;project&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
  &lt;artifactId&gt;util&lt;/artifactId&gt;
  &lt;name&gt;Generic Utility Code&lt;/name&gt;
  &lt;groupId&gt;org.apache.project.util&lt;/groupId&gt;
  &lt;version&gt;1.1&lt;/version&gt;
  &lt;packaging&gt;jar&lt;/packaging&gt;
  &lt;dependencies&gt;
  ...
  &lt;/dependencies&gt;
  &lt;build&gt;
  ...
  &lt;/build&gt;
  ...
&lt;/project&gt;</pre></div>
<p>For more details, check out the <a href="../introduction/introduction-to-the-pom.html">POM Guide</a>.</p></div>
<div class="section">
<h3><a name="build.properties_and_project.properties"></a>build.properties and project.properties</h3>
<p>These files have been replaced with <a href="../../settings.html">settings.xml</a>. Like with the POM, you can establish a parallel build environment, so the m1 build never breaks while the m2 build is being debugged.</p>
<p>Additional local build customization options can also be created using <a href="../introduction/introduction-to-profiles.html">profiles</a>.</p></div>
<div class="section">
<h3><a name="What_to_do_with_maven.xml"></a>What to do with maven.xml?</h3>
<p>See <a href="../../maven1.html#m1-maven-xml">How do I write custom scripts without a maven.xml file?</a> for an explanation of why maven.xml was discarded, and <a href="../introduction/introduction-to-plugins.html">Introduction to Maven 2.0 Plugin Development</a> for a guide to writing your own plug-ins.</p></div>
<div class="section">
<h3><a name="Directory_Structure"></a>Directory Structure</h3>
<p>The POM allows customization of the directory structure in both Maven 1 and Maven 2 using the <tt>&lt;build&gt;</tt> tag. For simplicity, it would be ideal to move source to the <a href="../introduction/introduction-to-the-standard-directory-layout.html">Maven 2 default structure</a>, but it is not required. You can begin by customizing the directories in Maven 2, then when satisfied that both build paths are working, move to the Maven 2 structure and customize the settings in Maven 1.</p></div>
<div class="section">
<h3><a name="Migrating_Plug-ins"></a>Migrating Plug-ins</h3>
<p>The main conceptual change in plugins and their use has to do with the concept of a build cycle in Maven 2. Instead of using <tt>preGoal</tt> and <tt>postGoal</tt> tags in <tt>maven.xml</tt> to tie plugin goals into the build process, the goals of a plugin are associated with the pre-defined stages of the build cycle. See the <a href="../introduction/introduction-to-the-lifecycle.html">Introduction to the Build Lifecycle</a> for more on how plugins relate.</p>
<div class="section">
<h4><a name="Re-use_Ant_Tasks"></a>Re-use Ant Tasks</h4>
<p>See the <a href="../../general.html#using-ant-tasks">Ant Script FAQ</a>.</p></div>
<div class="section">
<h4><a name="Replace_scripts_with_Mojos"></a>Replace scripts with Mojos</h4>
<p>The new plugin architecture does not specify a specific language implementation, so Jelly scripts and other such artifacts should be re-usable with wrappers. It is recommended that you look into moving to <a href="../plugin/guide-java-plugin-development.html">Mojos</a>.</p></div>
<div class="section">
<h4><a name="Utilize_built-in_Maven_2_capabilities"></a>Utilize built-in Maven 2 capabilities</h4>
<div class="section">
<h5><a name="Resource_filtering_to_inject_POM_variables_into_application"></a>Resource filtering to inject POM variables into application</h5>
<p>You can turn on <a href="../getting-started/index.html#How_do_I_filter_resource_files">resource filtering</a> in your POM. Tokens of the form <tt>${pom.variable}</tt> in resource files will be replaced with the corresponding POM property.</p>
<div class="source"><pre class="prettyprint linenums">&lt;project&gt;
  ...
  &lt;build&gt;
    &lt;resources&gt;
      &lt;resource&gt;
        &lt;directory&gt;src/main/resources&lt;/directory&gt;
        &lt;filtering&gt;true&lt;/filtering&gt;
      &lt;/resource&gt;
    &lt;/resources&gt;
  &lt;/build&gt;
&lt;/project&gt;</pre></div></div>
<div class="section">
<h5><a name="Multiproject_Builds"></a>Multiproject Builds</h5>
<p>The old reactor+multiproject plugin combination was established more as an afterthought of the core development. In Maven 2, multiproject support is included in the core, so any scripts required in the past to work around problems with the multiproject plugin should be unnecessary.</p></div></div></div>
<div class="section">
<h3><a name="Migrating_repositories"></a>Migrating repositories</h3>
<p>Every four hours the Maven 1.x repository is converted over to a Maven 2.x repository and we plan to release a plug-in based on our conversion tool but currently.</p></div>
<div class="section">
<h3><a name="Related_links"></a>Related links</h3>
<ul>
<li><a class="externalLink" href="http://maven.apache.org/plugins/maven-one-plugin/">Maven 2 One Plugin</a></li>
<li><a class="externalLink" href="https://svn.apache.org/repos/asf/maven/sandbox/trunk/other/m1-m2/maven1+project+to+maven2+pom.xsl">XSLT</a> from <a class="externalLink" href="http://jira.codehaus.org/browse/MNG-2337">MNG-2337</a></li>
<li><a class="externalLink" href="http://www.nabble.com/using-preGoal-and-postGoal-in-m2--td1151533s177.html">using preGoal and postGoal in m2?</a> Thread.</li></ul></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                    2002&#x2013;2015
                        <a href="http://www.apache.org/">The Apache Software Foundation</a>.
            All rights reserved.      
                    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
