<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2015-05-03 
 | Rendered using Apache Maven Fluido Skin 1.4-SNAPSHOT
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Dennis Lundberg" />
    <meta name="Date-Creation-yyyymmdd" content="20060708" />
    <meta name="Date-Revision-yyyymmdd" content="20150503" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Maven &#x2013; Guide to relocation</title>
    <link rel="stylesheet" href="../../css/apache-maven-fluido-1.4-SNAPSHOT.min.css" />
    <link rel="stylesheet" href="../../css/site.css" />
    <link rel="stylesheet" href="../../css/print.css" media="print" />

      
    <script type="text/javascript" src="../../js/apache-maven-fluido-1.4-SNAPSHOT.min.js"></script>

                          
        
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>
                      
        
<script type="text/javascript">_uacct = "UA-140879-1";
        urchinTracker();</script>
          
                  </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="http://www.apache.org/" id="bannerLeft">
                                                                                                <img src="../../images/apache-maven-project.png" />
                </a>
                      </div>
        <div class="pull-right">                                <a href="../.././" id="bannerRight">
                                                                                                <img src="../../images/maven-logo-black-on-white.png" />
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                              <li class="">
                    <a href="http://www.apache.org/" class="externalLink" title="Apache">
        Apache</a>
                    <span class="divider">/</span>
      </li>
            <li class="">
                    <a href="../../index.html" title="Maven">
        Maven</a>
                    <span class="divider">/</span>
      </li>
        <li class="active ">Guide to relocation</li>
        
                
                    
                  <li id="publishDate" class="pull-right">Last Published: 2015-05-03</li>
            
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Main</li>
                              
      <li>
  
                          <a href="../../index.html" title="Welcome">
          <span class="none"></span>
        Welcome</a>
            </li>
                              <li class="nav-header">Get Maven</li>
                              
      <li>
  
                          <a href="../../download.html" title="Download">
          <span class="none"></span>
        Download</a>
            </li>
                
      <li>
  
                          <a href="../../docs/history.html" title="Releases History">
          <span class="none"></span>
        Releases History</a>
            </li>
                
      <li>
  
                          <a href="../../docs/3.3.1/release-notes.html" title="Release Notes (3.3.1)">
          <span class="none"></span>
        Release Notes (3.3.1)</a>
            </li>
                
      <li>
  
                          <a href="../../docs/3.2.5/release-notes.html" title="Release Notes (3.2.5)">
          <span class="none"></span>
        Release Notes (3.2.5)</a>
            </li>
                
      <li>
  
                          <a href="../../docs/3.1.1/release-notes.html" title="Release Notes (3.1.1)">
          <span class="none"></span>
        Release Notes (3.1.1)</a>
            </li>
                
      <li>
  
                          <a href="../../docs/3.0.5/release-notes.html" title="Release Notes (3.0.5)">
          <span class="none"></span>
        Release Notes (3.0.5)</a>
            </li>
                
      <li>
  
                          <a href="../../release-notes-all.html" title="All Release Notes">
          <span class="none"></span>
        All Release Notes</a>
            </li>
                
      <li>
  
                          <a href="http://www.apache.org/licenses/" class="externalLink" title="License">
          <span class="none"></span>
        License</a>
            </li>
                
      <li>
  
                          <a href="../../security.html" title="Security">
          <span class="none"></span>
        Security</a>
            </li>
                              <li class="nav-header">IDE Integration</li>
                              
      <li>
  
                          <a href="../../eclipse-plugin.html" title="Eclipse">
          <span class="none"></span>
        Eclipse</a>
            </li>
                
      <li>
  
                          <a href="../../netbeans-module.html" title="NetBeans">
          <span class="none"></span>
        NetBeans</a>
            </li>
                              <li class="nav-header">About Maven</li>
                              
      <li>
  
                          <a href="../../what-is-maven.html" title="What is Maven?">
          <span class="none"></span>
        What is Maven?</a>
            </li>
                
      <li>
  
                          <a href="../../maven-features.html" title="Features">
          <span class="none"></span>
        Features</a>
            </li>
                
      <li>
  
                          <a href="../../general.html" title="FAQ (official)">
          <span class="none"></span>
        FAQ (official)</a>
            </li>
                
      <li>
  
                          <a href="http://docs.codehaus.org/display/MAVENUSER/FAQs-1" class="externalLink" title="FAQ (unofficial)">
          <span class="none"></span>
        FAQ (unofficial)</a>
            </li>
                
      <li>
  
                          <a href="../../support-and-training.html" title="Support and Training">
          <span class="none"></span>
        Support and Training</a>
            </li>
                              <li class="nav-header">Documentation</li>
                              
      <li>
  
                          <a href="../../plugins/index.html" title="Maven Plugins">
          <span class="none"></span>
        Maven Plugins</a>
            </li>
                
      <li>
  
                          <a href="../../guides/index.html" title="Index (category)">
          <span class="none"></span>
        Index (category)</a>
            </li>
                
      <li>
  
                          <a href="../../run-maven/index.html" title="Running Maven">
          <span class="none"></span>
        Running Maven</a>
            </li>
                                                                                                                                          
      <li>
  
                          <a href="../../users/index.html" title="User Centre">
          <span class="icon-chevron-right"></span>
        User Centre</a>
                  </li>
                                                                                                      
      <li>
  
                          <a href="../../plugin-developers/index.html" title="Plugin Developer Centre">
          <span class="icon-chevron-right"></span>
        Plugin Developer Centre</a>
                  </li>
                
      <li>
  
                          <a href="../../repository/index.html" title="Maven Repository Centre">
          <span class="none"></span>
        Maven Repository Centre</a>
            </li>
                
      <li>
  
                          <a href="../../developers/index.html" title="Maven Developer Centre">
          <span class="none"></span>
        Maven Developer Centre</a>
            </li>
                
      <li>
  
                          <a href="../../articles.html" title="Books and Resources">
          <span class="none"></span>
        Books and Resources</a>
            </li>
                
      <li>
  
                          <a href="http://docs.codehaus.org/display/MAVENUSER/Home" class="externalLink" title="Wiki">
          <span class="none"></span>
        Wiki</a>
            </li>
                              <li class="nav-header">Community</li>
                              
      <li>
  
                          <a href="../../community.html" title="Community Overview">
          <span class="none"></span>
        Community Overview</a>
            </li>
                
      <li>
  
                          <a href="../../guides/development/guide-helping.html" title="How to Contribute">
          <span class="none"></span>
        How to Contribute</a>
            </li>
                
      <li>
  
                          <a href="../../guides/mini/guide-maven-evangelism.html" title="Maven Repository">
          <span class="none"></span>
        Maven Repository</a>
            </li>
                
      <li>
  
                          <a href="../../users/getting-help.html" title="Getting Help">
          <span class="none"></span>
        Getting Help</a>
            </li>
                
      <li>
  
                          <a href="../../issue-tracking.html" title="Issue Tracking">
          <span class="none"></span>
        Issue Tracking</a>
            </li>
                
      <li>
  
                          <a href="../../source-repository.html" title="Source Repository">
          <span class="none"></span>
        Source Repository</a>
            </li>
                
      <li>
  
                          <a href="../../team-list.html" title="The Maven Team">
          <span class="none"></span>
        The Maven Team</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                          
      <li>
  
                          <a href="../../project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                              <li class="nav-header">Maven Projects</li>
                              
      <li>
  
                          <a href="../../ant-tasks/index.html" title="Ant Tasks">
          <span class="none"></span>
        Ant Tasks</a>
            </li>
                
      <li>
  
                          <a href="../../archetype/index.html" title="Archetype">
          <span class="none"></span>
        Archetype</a>
            </li>
                
      <li>
  
                          <a href="../../doxia/index.html" title="Doxia">
          <span class="none"></span>
        Doxia</a>
            </li>
                
      <li>
  
                          <a href="../../jxr/index.html" title="JXR">
          <span class="none"></span>
        JXR</a>
            </li>
                
      <li>
  
                          <a href="../../ref/current" title="Maven">
          <span class="none"></span>
        Maven</a>
            </li>
                
      <li>
  
                          <a href="../../pom/index.html" title="Parent POMs">
          <span class="none"></span>
        Parent POMs</a>
            </li>
                
      <li>
  
                          <a href="../../plugins/index.html" title="Plugins">
          <span class="none"></span>
        Plugins</a>
            </li>
                
      <li>
  
                          <a href="../../plugin-testing/index.html" title="Plugin Testing">
          <span class="none"></span>
        Plugin Testing</a>
            </li>
                
      <li>
  
                          <a href="../../plugin-tools/index.html" title="Plugin Tools">
          <span class="none"></span>
        Plugin Tools</a>
            </li>
                
      <li>
  
                          <a href="../../apache-resource-bundles/index.html" title="Resource Bundles">
          <span class="none"></span>
        Resource Bundles</a>
            </li>
                
      <li>
  
                          <a href="../../scm/index.html" title="SCM">
          <span class="none"></span>
        SCM</a>
            </li>
                
      <li>
  
                          <a href="../../shared/index.html" title="Shared Components">
          <span class="none"></span>
        Shared Components</a>
            </li>
                
      <li>
  
                          <a href="../../skins/index.html" title="Skins">
          <span class="none"></span>
        Skins</a>
            </li>
                
      <li>
  
                          <a href="../../surefire/index.html" title="Surefire">
          <span class="none"></span>
        Surefire</a>
            </li>
                
      <li>
  
                          <a href="../../wagon/index.html" title="Wagon">
          <span class="none"></span>
        Wagon</a>
            </li>
                              <li class="nav-header">ASF</li>
                              
      <li>
  
                          <a href="http://www.apache.org/foundation/how-it-works.html" class="externalLink" title="How Apache Works">
          <span class="none"></span>
        How Apache Works</a>
            </li>
                
      <li>
  
                          <a href="http://www.apache.org/foundation/" class="externalLink" title="Foundation">
          <span class="none"></span>
        Foundation</a>
            </li>
                
      <li>
  
                          <a href="http://www.apache.org/foundation/sponsorship.html" class="externalLink" title="Sponsoring Apache">
          <span class="none"></span>
        Sponsoring Apache</a>
            </li>
                
      <li>
  
                          <a href="http://www.apache.org/foundation/thanks.html" class="externalLink" title="Thanks">
          <span class="none"></span>
        Thanks</a>
            </li>
            </ul>
                
                    
                            <form id="search-form" action="https://www.google.com/search" method="get" >
    
  <input value="$sitesearchValue" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="https://www.google.com/coop/cse/brand?form=search-form"></script>
          
          <hr />

           <div id="poweredBy">
                   
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>

    
    <div class="g-plusone" data-href="http://maven.apache.org/" data-size="tall" ></div>

                   <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <!-- Licensed to the Apache Software Foundation (ASF) under one --><!-- or more contributor license agreements.  See the NOTICE file --><!-- distributed with this work for additional information --><!-- regarding copyright ownership.  The ASF licenses this file --><!-- to you under the Apache License, Version 2.0 (the --><!-- "License"); you may not use this file except in compliance --><!-- with the License.  You may obtain a copy of the License at --><!--  --><!-- http://www.apache.org/licenses/LICENSE-2.0 --><!--  --><!-- Unless required by applicable law or agreed to in writing, --><!-- software distributed under the License is distributed on an --><!-- "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY --><!-- KIND, either express or implied.  See the License for the --><!-- specific language governing permissions and limitations --><!-- under the License. --><!-- NOTE: For help with the syntax of this file, see: --><!-- http://maven.apache.org/doxia/references/apt-format.html --><div class="section">
<h2><a name="Guide_to_relocation"></a>Guide to relocation</h2>
<p>Sometimes it is necessary to relocate artifacts in the repository. One example of that is when a project moves from Maven 1 to Maven 2. Maven 1 projects have traditionally used a flat repository structure, while Maven 2 uses a deep repository structure. As an example the Maven 1 project has a groupId of <tt>maven</tt> while the Maven 2 project has a groupId of <tt>org.apache.maven</tt>.</p>
<p>Making changes to the repository can have far reaching consequences. So it is best to get it right the first time, hence this guide. It will go through a couple of different kinds of relocations:</p>
<ul>
<li>Maven 1 to Maven 1</li>
<li>Maven 2 to Maven 2</li>
<li>Maven 1 to Maven 2</li></ul>
<p>The goal of the examples below is to relocate the groupId from <tt>bar</tt> to <tt>org.bar</tt> for the <tt>foo</tt> project.</p>
<div class="section">
<h3><a name="How_to_relocate_a_Maven_1_artifact_to_a_different_groupId"></a>How to relocate a Maven 1 artifact to a different groupId</h3>
<ol style="list-style-type: decimal">
<li>Copy all <tt>foo</tt>-related files from <tt>/bar/</tt> in your Maven 1 repository to a temporary location.</li>
<li>Change the groupId to <tt>org.bar</tt> in all the <tt>foo</tt>-related pom files in the temporary location.</li>
<li>If your project uses MD5 or SHA1 checksums you must now create new checksums for the changed pom files in the temporary location. If the pom file needs to be signed, do that as well.</li>
<li>Copy all files from the temporary location to <tt>/org.bar/</tt> in your Maven 1 repository.</li>
<li>If your project syncs with ibiblio, you should now initiate that sync. This might happen automatically depending on your projects sync policy.</li></ol>
<p>Your <tt>foo</tt>-artifacts are now available to Maven 1 users with both the old and the new groupId.</p>
<div class="section">
<h4><a name="Releasing_the_next_version"></a>Releasing the next version</h4>
<p>When the next release of <tt>foo</tt> is made, you publish the Maven 1 pom as you have always done. Unfortunately Maven 1 does not have a concept of automatic relocation and notification, so you will have to inform your users of the changed groupId through your regular information channels.</p></div></div>
<div class="section">
<h3><a name="How_to_relocate_a_Maven_2_artifact_to_a_different_groupId"></a>How to relocate a Maven 2 artifact to a different groupId</h3>
<ol style="list-style-type: decimal">
<li>Copy all <tt>foo</tt>-related files from <tt>/bar/foo/</tt> in your Maven 2 repository to a temporary location.</li>
<li>Change the groupId to <tt>org.bar</tt> in all <tt>foo</tt>-related pom files in the temporary location.</li>
<li>Copy all files from the temporary location to <tt>/org/bar/foo/</tt> in your Maven 2 repository.</li>
<li>Create a minimal Maven 2 pom file for every old release of <tt>foo</tt> in your Maven 2 repository. The pom files only need to include <tt>groupId</tt>, <tt>artifactId</tt>, <tt>version</tt> and the relocation section.
<p><b>Note:</b> Before you replace your old pom files in <tt>/bar/foo/</tt> with these minimal pom files, make sure you have made backups!</p>
<p>The minimal pom file might look like this for version 1.0 of <tt>foo</tt>:</p>
<div class="source"><pre class="prettyprint linenums">&lt;project&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
  &lt;groupId&gt;bar&lt;/groupId&gt;
  &lt;artifactId&gt;foo&lt;/artifactId&gt;
  &lt;version&gt;1.0&lt;/version&gt;
  &lt;distributionManagement&gt;
    &lt;relocation&gt;
      &lt;groupId&gt;org.bar&lt;/groupId&gt;
    &lt;/relocation&gt;
  &lt;/distributionManagement&gt;
&lt;/project&gt;</pre></div>
<p>In this case we are relocating because the groupId has changed. We only need to add the element that has changed to the <tt>relocation</tt> element. For information on which elements are allowed in the <tt>relocation</tt> element, see <a class="externalLink" href="http://maven.apache.org/ref/current/maven-model/maven.html#class_relocation">the pom reference</a>.</p></li>
<li>If your project uses MD5 or SHA1 checksums you must now create new checksums for the pom files in <tt>/bar/foo/</tt> in your Maven 2 repository. If the pom file needs to be signed, do that as well.</li>
<li>If your project syncs with ibiblio, you should now initiate that sync. This might happen automatically depending on your projects sync policy.</li></ol>
<p>Your <tt>foo</tt>-artifacts are now available to Maven 2 users with both the old and the new groupId. Projects using the old groupId will automatically be redirected to the new groupId and a warning telling the user to update their dependencies will be issued.</p>
<div class="section">
<h4><a name="Releasing_the_next_version"></a>Releasing the next version</h4>
<p>When the next release of <tt>foo</tt> is made, you should publish two Maven 2 pom files. First you should publish a pom with the new groupId <tt>org.bar</tt>.</p>
<p>Because data in the repository is not supposed to change, Maven 2 doesn't download pom files that it has already downloaded. Therefor you will also need to publish a pom file with the old groupId <tt>bar</tt> for the new version. This should be a minimal relocation pom (as described in step 4 above), but for the new version of <tt>foo</tt>.</p>
<p>For the release after that, you only need to publish a Maven 2 pom with a groupId of <tt>org.bar</tt>, since users of the previous version have been informed of the changed groupId.</p></div></div>
<div class="section">
<h3><a name="How_to_relocate_a_Maven_1_artifact_to_a_Maven_2_artifact_with_a_different_groupId"></a>How to relocate a Maven 1 artifact to a Maven 2 artifact with a different groupId</h3>
<p><i>This is only of interest to organizations (like the Apache Software Foundation) that automatically converts the contents of their Maven 1 repository to their Maven 2 repository.</i></p>
<p>Follow steps 4 to 6 in the section <i>How to relocate a Maven 2 artifact to a different groupId</i> above.</p>
<div class="section">
<h4><a name="Releasing_the_next_version"></a>Releasing the next version</h4>
<p>When the next release of <tt>foo</tt> is made, you should publish the Maven 1 pom as you have always done. In addition to that, you should publish a Maven 2 pom with a groupId of <tt>bar</tt>, a version of &lt;next-version&gt; and include a relocation section. This step can be done once for the first release of a project, after the groupId has been changed, but your users will be happier if you do it more times.</p></div></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                    2002&#x2013;2015
                        <a href="http://www.apache.org/">The Apache Software Foundation</a>.
            All rights reserved.      
                    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
